"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var FormValidationService = (function () {
    function FormValidationService() {
    }
    // Username validator
    FormValidationService.prototype.usernameValidator = function (username) {
        if (username !== undefined) {
            if (username.match(/^[0-9a-zA-Z\s\r\n@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\?]+$/)) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return true;
        }
    };
    // Email id pattern match validator
    FormValidationService.prototype.emailMatchValidator = function (mailid) {
        if (mailid !== undefined) {
            if (mailid === "") {
                return true;
            }
            else {
                // /^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/
                if (mailid.match(/([a-z0-9][-a-z0-9_\+\.]*[a-z0-9])@([a-z0-9][-a-z0-9\.]*[a-z0-9]\.(org|com|edu)$)/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    // Email id filled check
    FormValidationService.prototype.emailFilledValidator = function (mailid) {
        if (mailid === undefined) {
            return false;
        }
        else {
            return true;
        }
    };
    // Password pattern match validator
    FormValidationService.prototype.passwordPatternValidator = function (pwd) {
        if (pwd !== undefined) {
            if (pwd === "") {
                return true;
            }
            else {
                if (pwd.match(/^(?=.*[0-9])[a-zA-Z0-9!@#$%^&*]{7,100}$/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    // Password  filled check
    FormValidationService.prototype.passwordFilledValidator = function (pwd) {
        if (pwd === undefined || pwd === "") {
            return false;
        }
        else {
            return false;
        }
    };
    // Mobile Number Validator
    FormValidationService.prototype.mobileNumberValidator = function (mblno) {
        if (mblno !== undefined) {
            if (mblno === "") {
                return true;
            }
            else {
                if (mblno.length === 10 && (mblno.match(/^\d+$/))) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    // Mobile no  filled check
    FormValidationService.prototype.mobileNumberFilledValidator = function (mblno) {
        if (mblno === undefined || mblno === "") {
            return false;
        }
        else
            return true;
    };
    // SSN Number Validator
    FormValidationService.prototype.snnNumberValidator = function (ssnno) {
        if (ssnno !== undefined && ssnno !== "") {
            if (ssnno.length === 9) {
                if (ssnno.match(/^\d+$/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        }
        else {
            return true;
        }
    };
    FormValidationService.prototype.fieldFilledValidator = function (arg) {
        if (arg === undefined || arg === "") {
            return false;
        }
        else {
            return true;
        }
    };
    FormValidationService.prototype.onlyDigitsValidator = function (arg) {
        if (arg !== undefined && arg !== "") {
            if (arg.match(/^\d+$/)) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return true;
        }
    };
    FormValidationService.prototype.onlyAlphabetsValidator = function (arg) {
        if (arg !== undefined) {
            if (arg !== "") {
                if (arg.match(/^[a-zA-Z '-]{0,150}$/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else
                return true;
        }
        else {
            return true;
        }
    };
    FormValidationService.prototype.memberIdValidator = function (arg) {
        if (arg !== undefined && arg !== "") {
            if (arg.length === 14) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return true;
        }
    };
    FormValidationService.prototype.debitCardNoValidator = function (arg) {
        if (arg !== undefined) {
            if (arg.length === 16) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return true;
        }
    };
    // Date validation starts here
    FormValidationService.prototype.dateValidator = function (arg) {
        if (arg !== undefined) {
            if (arg === "") {
                return true;
            }
            else {
                var inputDate = new Date(arg);
                var todaysDate = new Date();
                var year = arg.substr(arg.length - 4);
                var date = arg.substring(3, 5);
                var month = arg.substring(0, 2);
                var pattern = "^(1[0-2]|0?[1-9])/(3[01]|[12][0-9]|0?[1-9])/(?:[0-9]{2})?[0-9]{2}$";
                if (arg.match(pattern)) {
                    if (inputDate.setHours(0, 0, 0, 0) <= todaysDate.setHours(0, 0, 0, 0) && year >= 1900) {
                        // to check whether greater than current date
                        if ((date === "31") &&
                            (month === "4" || month === "6" || month === "9" || month === "11" || month === "04" || month === "06" || month === "09")) {
                            return false; // only 1,3,5,7,8,10,12 has 31 days
                        }
                        else if (month === "2" || month === "02") {
                            // leap year
                            if (year % 4 === 0) {
                                if (date === "30" || date === "31") {
                                    return false;
                                }
                                else {
                                    return true;
                                }
                            }
                            else {
                                if (date === "29" || date === "30" || date === "31") {
                                    return false;
                                }
                                else {
                                    return true;
                                }
                            }
                        }
                        else {
                            return true;
                        }
                    }
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    // Date validation ends here
    FormValidationService.prototype.getAge = function (birthDateString) {
        var today = new Date();
        var birthDate = new Date(birthDateString);
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    };
    //Age validation for 18 years and above 
    FormValidationService.prototype.minimumAgeValidator = function (arg) {
        if (arg !== "" && arg !== undefined) {
            if (this.getAge(arg) >= 18) {
                return true;
            }
            else
                return false;
        }
        else
            return true;
    };
    //Alphanumeric validator
    FormValidationService.prototype.alphaNumericValidator = function (arg) {
        if (arg !== undefined) {
            if (arg === "") {
                return true;
            }
            else {
                if (arg.match(/^[0-9a-zA-Z]+$/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    // Alpha memid with first 3 charactyers and rest digits
    FormValidationService.prototype.alphaNumericMemValidator = function (arg) {
        if (arg !== undefined) {
            if (arg === "") {
                return true;
            }
            else {
                if (arg.match(/^[a-zA-Z]{3}[0-9]{11}$/)) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        else {
            return true;
        }
    };
    return FormValidationService;
}());
FormValidationService = __decorate([
    core_1.Injectable()
], FormValidationService);
exports.FormValidationService = FormValidationService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybVZhbGlkYXRpb24uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZvcm1WYWxpZGF0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMkM7QUFJM0MsSUFBYSxxQkFBcUI7SUFBbEM7SUF3UkEsQ0FBQztJQWxSRyxxQkFBcUI7SUFDckIsaURBQWlCLEdBQWpCLFVBQWtCLFFBQVE7UUFDdEIsRUFBRSxDQUFDLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDekIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxpRUFBaUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDcEYsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNoQixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osTUFBTSxDQUFDLEtBQUssQ0FBQztZQUNqQixDQUFDO1FBQ0wsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDO0lBQ0wsQ0FBQztJQUNELG1DQUFtQztJQUVuQyxtREFBbUIsR0FBbkIsVUFBb0IsTUFBTTtRQUN0QixFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN2QixFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNoQixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ1IseUVBQXlFO2dCQUN6RSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGtGQUFrRixDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMvRixNQUFNLENBQUMsSUFBSSxDQUFDO2dCQUNoQixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7WUFDTCxDQUFD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Q0QsSUFBSSxDQUFDLENBQUM7WUFDRixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2hCLENBQUM7SUFDTCxDQUFDO0lBQ0wsNEJBQUM7QUFBRCxDQUFDLEFBeFJELElBd1JDO0FBeFJZLHFCQUFxQjtJQUZqQyxpQkFBVSxFQUFFO0dBRUEscUJBQXFCLENBd1JqQztBQXhSWSxzREFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbkBJbmplY3RhYmxlKClcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvblNlcnZpY2Uge1xyXG4gICAgcHVibGljIHRvZGF5RGF0ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHRvZGF5TW9udGg6IHN0cmluZztcclxuICAgIHB1YmxpYyB0b2RheVllYXI6IHN0cmluZztcclxuICAgIHB1YmxpYyBmdWxsRGF0ZTogc3RyaW5nO1xyXG5cclxuICAgIC8vIFVzZXJuYW1lIHZhbGlkYXRvclxyXG4gICAgdXNlcm5hbWVWYWxpZGF0b3IodXNlcm5hbWUpIHtcclxuICAgICAgICBpZiAodXNlcm5hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodXNlcm5hbWUubWF0Y2goL15bMC05YS16QS1aXFxzXFxyXFxuQCEjXFwkXFxeJSYqKCkrPVxcLVxcW1xcXVxcXFxcXCc7LFxcLlxcL1xce1xcfVxcfFxcXCI6PD5cXD9dKyQvKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBFbWFpbCBpZCBwYXR0ZXJuIG1hdGNoIHZhbGlkYXRvclxyXG5cclxuICAgIGVtYWlsTWF0Y2hWYWxpZGF0b3IobWFpbGlkKSB7XHJcbiAgICAgICAgaWYgKG1haWxpZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChtYWlsaWQgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAvXlthLXpBLVowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOS1dKyg/OlxcLlthLXpBLVowLTktXSspKiQvXHJcbiAgICAgICAgICAgIGlmIChtYWlsaWQubWF0Y2goLyhbYS16MC05XVstYS16MC05X1xcK1xcLl0qW2EtejAtOV0pQChbYS16MC05XVstYS16MC05XFwuXSpbYS16MC05XVxcLihvcmd8Y29tfGVkdSkkKS8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEVtYWlsIGlkIGZpbGxlZCBjaGVja1xyXG4gICAgZW1haWxGaWxsZWRWYWxpZGF0b3IobWFpbGlkKSB7XHJcbiAgICAgICAgaWYgKG1haWxpZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBQYXNzd29yZCBwYXR0ZXJuIG1hdGNoIHZhbGlkYXRvclxyXG4gICAgcGFzc3dvcmRQYXR0ZXJuVmFsaWRhdG9yKHB3ZCkge1xyXG4gICAgICAgIGlmIChwd2QgIT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgICAgICAgaWYgKHB3ZCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHdkLm1hdGNoKC9eKD89LipbMC05XSlbYS16QS1aMC05IUAjJCVeJipdezcsMTAwfSQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFBhc3N3b3JkICBmaWxsZWQgY2hlY2tcclxuICAgIHBhc3N3b3JkRmlsbGVkVmFsaWRhdG9yKHB3ZCkge1xyXG4gICAgICAgIGlmIChwd2QgPT09IHVuZGVmaW5lZCB8fCBwd2QgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBNb2JpbGUgTnVtYmVyIFZhbGlkYXRvclxyXG4gICAgbW9iaWxlTnVtYmVyVmFsaWRhdG9yKG1ibG5vKSB7XHJcbiAgICAgICAgaWYgKG1ibG5vICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKG1ibG5vID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYmxuby5sZW5ndGggPT09IDEwICYmICAobWJsbm8ubWF0Y2goL15cXGQrJC8pKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gTW9iaWxlIG5vICBmaWxsZWQgY2hlY2tcclxuICAgIG1vYmlsZU51bWJlckZpbGxlZFZhbGlkYXRvcihtYmxubykge1xyXG4gICAgICAgIGlmIChtYmxubyA9PT0gdW5kZWZpbmVkIHx8IG1ibG5vID09PSBcIlwiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBTU04gTnVtYmVyIFZhbGlkYXRvclxyXG4gICAgc25uTnVtYmVyVmFsaWRhdG9yKHNzbm5vKSB7XHJcbiAgICAgICAgaWYgKHNzbm5vICE9PSB1bmRlZmluZWQgJiYgc3Nubm8hPT1cIlwiKSB7XHJcbiAgICAgICAgICAgIGlmIChzc25uby5sZW5ndGggPT09IDkpIHtcclxuICAgICAgICAgICAgICAgICBpZiAoc3Nubm8ubWF0Y2goL15cXGQrJC8pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmllbGRGaWxsZWRWYWxpZGF0b3IoYXJnKSB7XHJcbiAgICAgICAgaWYgKGFyZyA9PT0gdW5kZWZpbmVkIHx8IGFyZyA9PT0gXCJcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9ubHlEaWdpdHNWYWxpZGF0b3IoYXJnKSB7XHJcbiAgICAgICAgaWYgKGFyZyAhPT0gdW5kZWZpbmVkICYmIGFyZyAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpZiAoYXJnLm1hdGNoKC9eXFxkKyQvKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgb25seUFscGhhYmV0c1ZhbGlkYXRvcihhcmcpIHtcclxuICAgICAgIFxyXG4gICAgICAgIGlmIChhcmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoYXJnICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJnLm1hdGNoKC9eW2EtekEtWiAnLV17MCwxNTB9JC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWVtYmVySWRWYWxpZGF0b3IoYXJnKSB7XHJcbiAgICAgICAgaWYgKGFyZyAhPT0gdW5kZWZpbmVkICYmIGFyZyE9PVwiXCIpIHtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChhcmcubGVuZ3RoID09PSAxNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGViaXRDYXJkTm9WYWxpZGF0b3IoYXJnKSB7XHJcbiAgICAgICAgaWYgKGFyZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmcubGVuZ3RoID09PSAxNikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgIC8vIERhdGUgdmFsaWRhdGlvbiBzdGFydHMgaGVyZVxyXG4gICAgZGF0ZVZhbGlkYXRvcihhcmcpIHtcclxuICAgICAgICBpZiAoYXJnICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmcgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0RGF0ZSA9IG5ldyBEYXRlKGFyZyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9kYXlzRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgeWVhciA9IGFyZy5zdWJzdHIoYXJnLmxlbmd0aCAtIDQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBhcmcuc3Vic3RyaW5nKDMsIDUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vbnRoID0gYXJnLnN1YnN0cmluZygwLCAyKTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gXCJeKDFbMC0yXXwwP1sxLTldKS8oM1swMV18WzEyXVswLTldfDA/WzEtOV0pLyg/OlswLTldezJ9KT9bMC05XXsyfSRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChhcmcubWF0Y2gocGF0dGVybikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCkgPD0gdG9kYXlzRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKSAmJiB5ZWFyID49IDE5MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gY2hlY2sgd2hldGhlciBncmVhdGVyIHRoYW4gY3VycmVudCBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZGF0ZSA9PT0gXCIzMVwiKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1vbnRoID09PSBcIjRcIiB8fCBtb250aCA9PT0gXCI2XCIgfHwgbW9udGggPT09IFwiOVwiIHx8IG1vbnRoID09PSBcIjExXCIgfHwgbW9udGggPT09IFwiMDRcIiB8fCBtb250aCA9PT0gXCIwNlwiIHx8IG1vbnRoID09PSBcIjA5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9ubHkgMSwzLDUsNyw4LDEwLDEyIGhhcyAzMSBkYXlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9udGggPT09IFwiMlwiIHx8IG1vbnRoID09PSBcIjAyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlYXAgeWVhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHllYXIgJSA0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUgPT09IFwiMzBcIiB8fCBkYXRlID09PSBcIjMxXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly8gbm90IGEgbGVhcCB5ZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUgPT09IFwiMjlcIiB8fCBkYXRlID09PSBcIjMwXCIgfHwgZGF0ZSA9PT0gXCIzMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsvLyBwYXR0ZXJuIG1hdGNoaW5nIGVuZHMgaGVyZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIERhdGUgdmFsaWRhdGlvbiBlbmRzIGhlcmVcclxuICAgIGdldEFnZShiaXJ0aERhdGVTdHJpbmcpIHtcclxuICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICB2YXIgYmlydGhEYXRlID0gbmV3IERhdGUoYmlydGhEYXRlU3RyaW5nKTtcclxuICAgIHZhciBhZ2UgPSB0b2RheS5nZXRGdWxsWWVhcigpIC0gYmlydGhEYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICB2YXIgbSA9IHRvZGF5LmdldE1vbnRoKCkgLSBiaXJ0aERhdGUuZ2V0TW9udGgoKTtcclxuICAgIGlmIChtIDwgMCB8fCAobSA9PT0gMCAmJiB0b2RheS5nZXREYXRlKCkgPCBiaXJ0aERhdGUuZ2V0RGF0ZSgpKSkge1xyXG4gICAgICAgIGFnZS0tO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFnZTtcclxuICAgICB9XHJcbiAgICAvL0FnZSB2YWxpZGF0aW9uIGZvciAxOCB5ZWFycyBhbmQgYWJvdmUgXHJcbiAgICBtaW5pbXVtQWdlVmFsaWRhdG9yKGFyZyl7XHJcbiAgICAgICAgaWYoYXJnIT09XCJcIiAmJiBhcmchPT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgaWYodGhpcy5nZXRBZ2UoYXJnKSA+PSAxOCkgeyAgICAgICAgICBcclxuICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgLy9BbHBoYW51bWVyaWMgdmFsaWRhdG9yXHJcbiAgICAgYWxwaGFOdW1lcmljVmFsaWRhdG9yKGFyZykge1xyXG4gICAgIFxyXG4gICAgICAgIGlmIChhcmcgIT09IHVuZGVmaW5lZCAgKSB7ICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGFyZyA9PT0gXCJcIiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChhcmcubWF0Y2goL15bMC05YS16QS1aXSskLykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQWxwaGEgbWVtaWQgd2l0aCBmaXJzdCAzIGNoYXJhY3R5ZXJzIGFuZCByZXN0IGRpZ2l0c1xyXG4gIGFscGhhTnVtZXJpY01lbVZhbGlkYXRvcihhcmcpIHtcclxuICAgICBcclxuICAgICAgICBpZiAoYXJnICE9PSB1bmRlZmluZWQgICkgeyAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChhcmcgPT09IFwiXCIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYXJnLm1hdGNoKC9eW2EtekEtWl17M31bMC05XXsxMX0kLykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19