"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var _ = require("lodash");
var ItemsComponent = (function () {
    function ItemsComponent() {
        this.chartResult = [];
    }
    ItemsComponent.prototype.ngOnInit = function () {
        var data = [{ "start": "2017-12-19T12:59:31.007Z", "end": "2017-12-19T13:05:58.304Z", "value": "346 count" }, { "start": "2017-12-19T12:50:57.321Z", "end": "2017-12-19T12:59:31.007Z", "value": "260 count" }, { "start": "2017-12-19T12:40:12.130Z", "end": "2017-12-19T12:41:07.690Z", "value": "55 count" }, { "start": "2017-12-19T12:30:12.283Z", "end": "2017-12-19T12:40:12.130Z", "value": "60 count" }, { "start": "2017-12-19T12:12:38.579Z", "end": "2017-12-19T12:15:47.882Z", "value": "27 count" }, { "start": "2017-12-19T12:03:16.669Z", "end": "2017-12-19T12:12:38.579Z", "value": "152 count" }, { "start": "2017-12-19T09:02:17.723Z", "end": "2017-12-19T09:04:11.171Z", "value": "42 count" }, { "start": "2017-12-19T08:53:00.599Z", "end": "2017-12-19T09:02:17.723Z", "value": "432 count" }, { "start": "2017-12-19T08:44:06.142Z", "end": "2017-12-19T08:53:00.599Z", "value": "211 count" }, { "start": "2017-12-19T08:31:34.791Z", "end": "2017-12-19T08:37:27.763Z", "value": "183 count" }, { "start": "2017-12-19T08:24:56.284Z", "end": "2017-12-19T08:31:34.791Z", "value": "23 count" }, { "start": "2017-12-19T08:16:45.160Z", "end": "2017-12-19T08:24:56.284Z", "value": "239 count" }, { "start": "2017-12-19T07:56:05.983Z", "end": "2017-12-19T08:02:30.153Z", "value": "743 count" }, { "start": "2017-12-19T07:46:08.378Z", "end": "2017-12-19T07:56:05.983Z", "value": "455 count" }];
        var getHour = function (date) { return new Date(date).getUTCHours(); };
        var onlyNumbers = function (el) { return el.replace(/[a-zA-Z+]/g, ''); };
        var flatten = function (acc, el) {
            var hour = getHour(el.start);
            var value = Number(onlyNumbers(el.value));
            var find = acc.find(function (f) { return f.hour === hour; });
            find
                ? (find.value += value)
                : acc.push({
                    hour: hour,
                    value: value,
                });
            return acc;
        };
        this.chartResult = _.orderBy(data.reduce(flatten, []), ['hour'], ['asc']); // try bundling wit lodash library
        // this.chartResult = data.reduce(flatten, []), ['hour'], ['asc'];
        console.log('Chart : ' + JSON.stringify(this.chartResult));
    };
    ItemsComponent = __decorate([
        core_1.Component({
            selector: "ns-items",
            moduleId: __filename,
            templateUrl: "./items.component.html",
        })
    ], ItemsComponent);
    return ItemsComponent;
}());
exports.ItemsComponent = ItemsComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaXRlbXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBS2xELDBCQUE0QjtBQU81QjtJQUxBO1FBTUksZ0JBQVcsR0FBVSxFQUFFLENBQUM7SUE0QjVCLENBQUM7SUExQkcsaUNBQVEsR0FBUjtRQUNJLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSwwQkFBMEIsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSwwQkFBMEIsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSwwQkFBMEIsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSwwQkFBMEIsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7UUFFbjJDLElBQU0sT0FBTyxHQUFHLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQTVCLENBQTRCLENBQUM7UUFDckQsSUFBTSxXQUFXLEdBQUcsVUFBQSxFQUFFLElBQUksT0FBQSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsRUFBNUIsQ0FBNEIsQ0FBQztRQUV2RCxJQUFNLE9BQU8sR0FBRyxVQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ3BCLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDL0IsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFNLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLEVBQWYsQ0FBZSxDQUFDLENBQUM7WUFFNUMsSUFBSTtrQkFDRSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDO2tCQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDO29CQUNQLElBQUksRUFBRSxJQUFJO29CQUNWLEtBQUssRUFBRSxLQUFLO2lCQUNmLENBQUMsQ0FBQztZQUVQLE1BQU0sQ0FBQyxHQUFHLENBQUE7UUFDZCxDQUFDLENBQUM7UUFFRixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQ0FBa0M7UUFDN0csa0VBQWtFO1FBRWxFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQTVCUSxjQUFjO1FBTDFCLGdCQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUsVUFBVTtZQUNwQixRQUFRLEVBQUUsVUFBVTtZQUNwQixXQUFXLEVBQUUsd0JBQXdCO1NBQ3hDLENBQUM7T0FDVyxjQUFjLENBNkIxQjtJQUFELHFCQUFDO0NBQUEsQUE3QkQsSUE2QkM7QUE3Qlksd0NBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwiLi9pdGVtXCI7XG5pbXBvcnQgeyBJdGVtU2VydmljZSB9IGZyb20gXCIuL2l0ZW0uc2VydmljZVwiO1xuXG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwibnMtaXRlbXNcIixcbiAgICBtb2R1bGVJZDogX19maWxlbmFtZSxcbiAgICB0ZW1wbGF0ZVVybDogXCIuL2l0ZW1zLmNvbXBvbmVudC5odG1sXCIsXG59KVxuZXhwb3J0IGNsYXNzIEl0ZW1zQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgICBjaGFydFJlc3VsdDogYW55W10gPSBbXTtcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBsZXQgZGF0YSA9IFt7IFwic3RhcnRcIjogXCIyMDE3LTEyLTE5VDEyOjU5OjMxLjAwN1pcIiwgXCJlbmRcIjogXCIyMDE3LTEyLTE5VDEzOjA1OjU4LjMwNFpcIiwgXCJ2YWx1ZVwiOiBcIjM0NiBjb3VudFwiIH0sIHsgXCJzdGFydFwiOiBcIjIwMTctMTItMTlUMTI6NTA6NTcuMzIxWlwiLCBcImVuZFwiOiBcIjIwMTctMTItMTlUMTI6NTk6MzEuMDA3WlwiLCBcInZhbHVlXCI6IFwiMjYwIGNvdW50XCIgfSwgeyBcInN0YXJ0XCI6IFwiMjAxNy0xMi0xOVQxMjo0MDoxMi4xMzBaXCIsIFwiZW5kXCI6IFwiMjAxNy0xMi0xOVQxMjo0MTowNy42OTBaXCIsIFwidmFsdWVcIjogXCI1NSBjb3VudFwiIH0sIHsgXCJzdGFydFwiOiBcIjIwMTctMTItMTlUMTI6MzA6MTIuMjgzWlwiLCBcImVuZFwiOiBcIjIwMTctMTItMTlUMTI6NDA6MTIuMTMwWlwiLCBcInZhbHVlXCI6IFwiNjAgY291bnRcIiB9LCB7IFwic3RhcnRcIjogXCIyMDE3LTEyLTE5VDEyOjEyOjM4LjU3OVpcIiwgXCJlbmRcIjogXCIyMDE3LTEyLTE5VDEyOjE1OjQ3Ljg4MlpcIiwgXCJ2YWx1ZVwiOiBcIjI3IGNvdW50XCIgfSwgeyBcInN0YXJ0XCI6IFwiMjAxNy0xMi0xOVQxMjowMzoxNi42NjlaXCIsIFwiZW5kXCI6IFwiMjAxNy0xMi0xOVQxMjoxMjozOC41NzlaXCIsIFwidmFsdWVcIjogXCIxNTIgY291bnRcIiB9LCB7IFwic3RhcnRcIjogXCIyMDE3LTEyLTE5VDA5OjAyOjE3LjcyM1pcIiwgXCJlbmRcIjogXCIyMDE3LTEyLTE5VDA5OjA0OjExLjE3MVpcIiwgXCJ2YWx1ZVwiOiBcIjQyIGNvdW50XCIgfSwgeyBcInN0YXJ0XCI6IFwiMjAxNy0xMi0xOVQwODo1MzowMC41OTlaXCIsIFwiZW5kXCI6IFwiMjAxNy0xMi0xOVQwOTowMjoxNy43MjNaXCIsIFwidmFsdWVcIjogXCI0MzIgY291bnRcIiB9LCB7IFwic3RhcnRcIjogXCIyMDE3LTEyLTE5VDA4OjQ0OjA2LjE0MlpcIiwgXCJlbmRcIjogXCIyMDE3LTEyLTE5VDA4OjUzOjAwLjU5OVpcIiwgXCJ2YWx1ZVwiOiBcIjIxMSBjb3VudFwiIH0sIHsgXCJzdGFydFwiOiBcIjIwMTctMTItMTlUMDg6MzE6MzQuNzkxWlwiLCBcImVuZFwiOiBcIjIwMTctMTItMTlUMDg6Mzc6MjcuNzYzWlwiLCBcInZhbHVlXCI6IFwiMTgzIGNvdW50XCIgfSwgeyBcInN0YXJ0XCI6IFwiMjAxNy0xMi0xOVQwODoyNDo1Ni4yODRaXCIsIFwiZW5kXCI6IFwiMjAxNy0xMi0xOVQwODozMTozNC43OTFaXCIsIFwidmFsdWVcIjogXCIyMyBjb3VudFwiIH0sIHsgXCJzdGFydFwiOiBcIjIwMTctMTItMTlUMDg6MTY6NDUuMTYwWlwiLCBcImVuZFwiOiBcIjIwMTctMTItMTlUMDg6MjQ6NTYuMjg0WlwiLCBcInZhbHVlXCI6IFwiMjM5IGNvdW50XCIgfSwgeyBcInN0YXJ0XCI6IFwiMjAxNy0xMi0xOVQwNzo1NjowNS45ODNaXCIsIFwiZW5kXCI6IFwiMjAxNy0xMi0xOVQwODowMjozMC4xNTNaXCIsIFwidmFsdWVcIjogXCI3NDMgY291bnRcIiB9LCB7IFwic3RhcnRcIjogXCIyMDE3LTEyLTE5VDA3OjQ2OjA4LjM3OFpcIiwgXCJlbmRcIjogXCIyMDE3LTEyLTE5VDA3OjU2OjA1Ljk4M1pcIiwgXCJ2YWx1ZVwiOiBcIjQ1NSBjb3VudFwiIH1dO1xuXG4gICAgICAgIGNvbnN0IGdldEhvdXIgPSBkYXRlID0+IG5ldyBEYXRlKGRhdGUpLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgIGNvbnN0IG9ubHlOdW1iZXJzID0gZWwgPT4gZWwucmVwbGFjZSgvW2EtekEtWitdL2csICcnKTtcblxuICAgICAgICBjb25zdCBmbGF0dGVuID0gKGFjYywgZWwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBnZXRIb3VyKGVsLnN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKG9ubHlOdW1iZXJzKGVsLnZhbHVlKSk7XG4gICAgICAgICAgICBjb25zdCBmaW5kID0gYWNjLmZpbmQoZiA9PiBmLmhvdXIgPT09IGhvdXIpO1xuXG4gICAgICAgICAgICBmaW5kXG4gICAgICAgICAgICAgICAgPyAoZmluZC52YWx1ZSArPSB2YWx1ZSlcbiAgICAgICAgICAgICAgICA6IGFjYy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaG91cjogaG91cixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jaGFydFJlc3VsdCA9IF8ub3JkZXJCeShkYXRhLnJlZHVjZShmbGF0dGVuLCBbXSksIFsnaG91ciddLCBbJ2FzYyddKTsgLy8gdHJ5IGJ1bmRsaW5nIHdpdCBsb2Rhc2ggbGlicmFyeVxuICAgICAgICAvLyB0aGlzLmNoYXJ0UmVzdWx0ID0gZGF0YS5yZWR1Y2UoZmxhdHRlbiwgW10pLCBbJ2hvdXInXSwgWydhc2MnXTtcblxuICAgICAgICBjb25zb2xlLmxvZygnQ2hhcnQgOiAnICsgSlNPTi5zdHJpbmdpZnkodGhpcy5jaGFydFJlc3VsdCkpO1xuICAgIH1cbn0iXX0=